**流媒体协议**  

我们所看的视频 其实就是快速播放一连串连续的图片 每一张图片 我们称之为 `帧`  
只要每秒帧的数据足够多 比如每秒30帧 我们是看不出来这是一张纸独立的图片的  `帧率（FPS）`  
每一张图片都是由像素组成 每个像素RGB 每个8位 共24位  这样算下去 一分钟视频以及是4个G了  
  
`编码是一个压缩过程`
1. 空间冗杂 图像相邻像素直接有很较强的相关性 一张图片相邻像素往往是渐变的 没有不用每个像素都完整保存  
2. 时间冗杂 视频系列的相邻图像直接内容相似 可以根据已有的图片进行预测和推断  
3. 视觉冗杂 人类视觉系统对某些细节不敏感 可以允许丢失一些数据  
4. 编码冗杂 不同像素值出现的概率不同 概率高用的字节少  


**P2P 协议**

- 文件传输协议（FTP）
  1. 客户端随机打开一个大于1024的端口 N 向服务器命令端口21发起连接  
     同时开发 N + 1 端口监听 并向服务器发出 `port N + 1` 命令  
     由服务器从自己的数据接口 20 主动连接到客户端指定的数据端口 N + 1  
     
  2. 客户端打开两个任意的本地端口 N、N + 1 第一个端口连接服务器 21 端口 提交 `PASV` 命令  
     服务器会开启一个端口 P 返回 `227 entering passvie mode` 消息 里面有 FTP 服务器  
     用来进行数据传输的端口 客户端接收端消息后 会通过 N + 1 端口连接服务器 P 端口

`P2P` 就是 `peer-to peer` 资源并不集中地存储在某些设备上 而是分散的存储多台设备  
想下载一个文件时 只要得到那些已经存在文件的设备上 建立点对点连接 而不是需要到中心服务器上  
就可以就近下载文件  一旦下载了文件 你也就成为其中设备之一

`种子文件` 由两部分组成 announce（tracker URL）和文件信息
    1. info 区  该种子有几个文件 文件有多长 目录结构
    2. name字段  指定顶层目录名字
    3. 每个段大小 BitTorrent（BT协议） 把一个文件分成很多小段
    4. 段哈希值 将整个种子中 每个段的 SHA-1 哈希值拼在一起
BT 客户端首先解析.torrent 文件 得到 tracker 地址 然后连接 tracker 服务器  
tracker 服务器回应下载者的请求 将其他下载者（包括发布者）的 IP 提供给下载者  
下载者再连接其他下载者，根据.torrent 文件，两者分别对方告知自己已经有的块，然后交换对方没有的数据  
此时不需要其他服务器参与，并分散了单个线路上的数据流量，因此减轻了服务器的负担。

