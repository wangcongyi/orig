#### commonjs 与 es6 modules 的区别

1. 语法不同：commonjs 使用require()和module.exports来导入和导出模块，而ES6 Module使用import和export语句。  
2. 加载方式不同：  
  - commonjs 是动态加载，即在运行时加载模块；而ES6 Module是静态加载，即在编译时就确定了模块的依赖关系。  
  - CommonJS 是同步加载模块，而 es6 modules 是异步加载模块。  
  - 在 Node.js 环境中，使用 require() 方法加载模块时，是在运行时动态地同步加载模块的。这意味着，当 require() 方法被调用时，程序会暂停执行并等待模块加载完成，然后再继续执行后面的代码。这种方式可以保证模块的依赖关系正确，但同时也会影响程序的性能。
  - 与 CommonJS 模块不同，ES6 模块是静态的，也就是说，在编译时就已经确定了模块的依赖关系，而不是在运行时动态加载。这样可以提高模块加载的效率，并且更好地支持静态分析工具。
3. 作用域不同：  
  - Ccommonjs 的模块是运行时加载，每个模块都有自己的作用域，即在模块内定义的变量和函数都是私有的；而ES6 Module的模块是编译时加载，每个模块都是单例的，即在模块内定义的变量和函数都是公共的。  
  - CommonJS 模块是运行时加载，每次导入都会执行模块代码，而 es6 modules 是编译时加载，模块中的代码只会在第一次导入时执行一次，并且会被缓存，后续导入会直接使用缓存。
4. 循环依赖处理方式不同：CommJS允许循环依赖，但是会返回一个未完全加载的对象；而ES6 Module不允许循环依赖，会抛出错误。  

在ES6模块中，变量和方法默认是私有的，只能在模块内部使用。如果多个模块都需要使用同一个变量或方法，可以将其导出为公共的变量或方法，其他模块通过导入来使用。

如果多个模块修改了公共的方法或变量，可以考虑使用以下方法：

使用immutable数据类型：使用不可变的数据类型，例如字符串、数字等，以确保不会被修改。

使用闭包：通过使用闭包来保护变量，防止其他模块修改。

使用命名空间：将公共的方法或变量放在一个命名空间中，其他模块只能访问该命名空间中的内容，以避免修改。

使用单例模式：将公共的方法或变量作为单例模式的属性，确保只有一个实例存在，并防止其他模块修改。
